@echo off
 title ����ѡͼ����������

echo ������������ѡͼ...

REM �л����ű����ڵ�Ŀ¼
cd /d "%~dp0"

REM �������⻷��
call .venv\Scripts\activate.bat

REM ���� Flask ����ģʽ (��ѡ������ʱ���Կ���)
REM set FLASK_DEBUG=True

REM ===============================================================
REM --- ADD: Wait briefly and open the browser ---
REM ����һ���µġ��޴��ڵ� cmd ���� (/b cmd /c "") ��ִ���ӳٺ�����������
REM timeout /t 2 >nul ��ȴ� 2 �룬�����������
REM && �����������ȷ���ӳٳɹ����ִ�еڶ������
REM start http://127.0.0.1:5000/ ��ʹ��ϵͳĬ���������ָ���� URL��
REM ע�⣺����� URL ��Ӳ�����Ĭ��ֵ��������޸��� .env �е� FLASK_RUN_PORT��������Ҫͬ���޸ġ�
echo ������ 2 ������������� http://127.0.0.1:5000/ ...
start "" /b cmd /c "timeout /t 1 >nul && start http://127.0.0.1:5000/"
REM --- END ADD ---

REM ===============================================================
REM ���� Python ������ (�������������ֱ��������ֹͣ)
python main.py

REM ===============================================================
REM ��� Python �ű��Ƿ����гɹ� (���ڷ�����ֹͣ��ִ��)
REM ����ű��˳��벻Ϊ 0 (ͨ����ʾ�д�����)������ͣ���Ա������Կ���������Ϣ��
REM ����ű��ɹ����У����ڽ��Զ��رա�
if %ERRORLEVEL% neq 0 (
    echo.
    echo --------------------------------------------------
    echo Ӧ�ó������й����з���������������������Ϣ��
    echo --------------------------------------------------
    pause
)

EXIT /B %ERRORLEVEL%